#!/usr/bin/env bash
# 0-custom_http_response_header

# Update the package list
sudo apt-get update

# Install Nginx if it's not already installed
if ! command -v nginx &> /dev/null; then
    sudo apt-get install -y nginx
fi

# Backup the original Nginx configuration file
sudo cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak

# Add the custom header to the Nginx configuration
sudo sed -i '/http {/a \    add_header X-Served-By "$HOSTNAME";' /etc/nginx/nginx.conf

# Restart Nginx to apply the changes
sudo systemctl restart nginx

# Verify the configuration
curl -sI localhost | grep X-Served-By
